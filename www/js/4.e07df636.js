(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"68a8":function(t,e,n){},"713b":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-layout",{attrs:{view:"hHh Lpr lFf"}},[n("q-header",{staticClass:"bg-white text-secondary",attrs:{elevated:""}},[n("q-toolbar",["home"!==t.$route.name?n("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"keyboard_arrow_left"},on:{click:function(e){return t.$router.back()}}}):t._e(),n("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu"},on:{click:function(e){t.leftDrawerOpen=!t.leftDrawerOpen}}}),n("q-toolbar-title",{staticClass:"text-primary",on:{click:function(e){return t.$router.push("/")}}},[t._v("\n        McBBs\n      ")]),void 0===t.userStore.user.userId?n("q-btn",{attrs:{flat:"",label:"登录"},on:{click:function(e){t.isLoginOpen=!0}}}):n("q-btn",{attrs:{flat:"",rounded:""}},[n("UserAvatar",{attrs:{uid:t.userStore.user.userId,size:"24px"}}),t._v("\n         "+t._s(t.userStore.user.nickName)+"\n      ")],1),n("div",{staticStyle:{display:"none"}},[t._v("Quasar v"+t._s(t.$q.version))])],1)],1),n("q-drawer",{attrs:{"show-if-above":"",bordered:"","content-class":"bg-grey-1"},model:{value:t.leftDrawerOpen,callback:function(e){t.leftDrawerOpen=e},expression:"leftDrawerOpen"}},[n("q-list",{staticClass:"text-secondary"},[n("q-item-label",{staticClass:"text-grey-8",attrs:{header:""}},[n("q-btn",{staticClass:"bg-primary text-white full-width",attrs:{flat:"",label:"发布主题",size:"1rem"},on:{click:function(e){t.isNewFormOpen=!0}}})],1),n("q-item",[n("q-item-section",[n("q-btn",{class:{"text-primary":"home"===t.$route.name},attrs:{icon:"forum",flat:"",align:"left"}},[t._v("\n             全部主题\n          ")])],1)],1),n("q-item",[n("q-item-section",[n("q-btn",{class:{"text-primary":"myFav"===t.$route.name},attrs:{icon:"forum",flat:"",align:"left"}},[t._v("\n             我的关注\n          ")])],1)],1),n("q-item",[n("q-item-section",[n("q-btn",{class:{"text-primary":"tag"===t.$route.name},attrs:{icon:"forum",flat:"",align:"left"}},[t._v("\n             标签\n          ")])],1)],1),n("q-item"),t._l(t.formTags,(function(e){return n("q-item",{key:e.id,attrs:{dense:""}},[n("q-item-section",[n("q-btn",{class:{"text-primary":"tag"===t.$route.name},attrs:{flat:"",align:"left"}},[n("q-avatar",{style:{backgroundColor:e.color},attrs:{rounded:"",size:"18px"}},[t._v(" \n            ")]),t._v(" "+t._s(e.name)+"\n          ")],1),n("q-tooltip",[t._v(t._s(e.title))])],1)],1)})),n("q-item",[n("q-item-section",[n("q-btn",{attrs:{flat:"",label:"更多标签..."},on:{click:t.handleMoreTag}})],1)],1)],2)],1),n("q-page-container",[n("router-view")],1),n("q-dialog",{model:{value:t.isLoginOpen,callback:function(e){t.isLoginOpen=e},expression:"isLoginOpen"}},[n("Login",{on:{submit:function(e){t.isLoginOpen=!1}}})],1),n("new-form-dialog",{model:{value:t.isNewFormOpen,callback:function(e){t.isNewFormOpen=e},expression:"isNewFormOpen"}})],1)},o=[],a=n("60a3"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-card",[n("q-card-section",{staticClass:"text-center",staticStyle:{"font-size":"1.2rem"}},[t._v("\n    登录\n  ")]),n("div",{staticStyle:{"background-color":"#ededed",padding:"1rem"}},[n("q-form",{staticClass:"form",staticStyle:{width:"350px"},on:{submit:t.login}},[n("q-input",{attrs:{label:"用户名",outlined:"",autofocus:"","bg-color":"white"},on:{input:function(e){return t.handleInput()}},model:{value:t.value.userName,callback:function(e){t.$set(t.value,"userName",e)},expression:"value.userName"}}),n("q-input",{attrs:{type:"password",label:"密码",outlined:"","bg-color":"white"},on:{input:function(e){return t.handleInput()}},model:{value:t.value.password,callback:function(e){t.$set(t.value,"password",e)},expression:"value.password"}}),n("q-checkbox",{staticStyle:{color:"#808080"},attrs:{dense:"",label:"记住我的登录状态"},model:{value:t.rememberMe,callback:function(e){t.rememberMe=e},expression:"rememberMe"}}),n("q-btn",{staticClass:"full-width bg-primary text-white",staticStyle:{padding:"0.1rem","font-size":"1.2rem"},attrs:{type:"submit",label:"登录",flat:""}})],1)],1),n("q-card-section",{staticClass:"text-center"},[t._v("\n    忘记密码 "),n("br"),t._v("\n    还没有帐户？ 立即注册\n  ")])],1)},c=[],l=n("23b0"),s=n("2332"),u=n("6fc5"),f=n("60b5"),p=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},b=function(t,e,n,r){function o(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,a){function i(t){try{l(r.next(t))}catch(e){a(e)}}function c(t){try{l(r["throw"](t))}catch(e){a(e)}}function l(t){t.done?n(t.value):o(t.value).then(i,c)}l((r=r.apply(t,e||[])).next())}))},h=function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(t){return function(e){return l([t,e])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,r&&(o=2&a[0]?r["return"]:a[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(c){a=[6,c],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rememberMe=!1,e.userStore=Object(u["d"])(f["a"],e.$store),e}return p(e,t),e.prototype.login=function(){return b(this,void 0,void 0,(function(){var t,e;return h(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,s["a"].login(this.value)];case 1:return t=n.sent(),this.handleInput(t),this.$emit("submit"),this.$q.notify({message:"登录成功",color:"green"}),this.userStore.setUser(t),[3,3];case 2:return e=n.sent(),this.$q.notify({message:"错误:"+e,color:"red"}),[3,3];case 3:return[2]}}))}))},e.prototype.handleInput=function(t){"undefined"!==typeof t?this.$emit("input",t):this.$emit("input",this.value)},e.prototype.created=function(){},d([Object(a["b"])({default:function(){return new l["a"]}})],e.prototype,"value",void 0),e=d([Object(a["a"])({components:{}})],e),e}(a["c"]),y=m,v=y,w=(n("a1a0"),n("2877")),g=n("f09f"),q=n("a370"),O=n("0378"),x=n("27f9"),_=n("8f8e"),k=n("9c40"),T=n("eebe"),S=n.n(T),j=Object(w["a"])(v,i,c,!1,null,"54b2af78",null),Q=j.exports;S()(j,"components",{QCard:g["a"],QCardSection:q["a"],QForm:O["a"],QInput:x["a"],QCheckbox:_["a"],QBtn:k["a"]});var $=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-dialog",{attrs:{value:t.value,position:"bottom"},on:{input:t.handleInput}},[n("q-card",[n("q-form",{on:{submit:function(e){return t.save()}}},[n("q-card-section",{staticStyle:{display:"flex"}},[n("q-avatar",[n("q-img",{attrs:{src:"/icons/favicon-128x128.png"}})],1),n("div",[n("div",{staticStyle:{display:"flex","align-items":"stretch","justify-content":"space-between"}},[n("q-select",{attrs:{options:t.options,dense:"",filled:""},scopedSlots:t._u([{key:"selected-item",fn:function(t){return[n("FormTagChip",{attrs:{value:t.opt}})]}}]),model:{value:t.formThread.tag,callback:function(e){t.$set(t.formThread,"tag",e)},expression:"formThread.tag"}}),n("q-input",{staticStyle:{"flex-grow":"1"},attrs:{label:"标题",dense:"",outlined:""},model:{value:t.formThread.title,callback:function(e){t.$set(t.formThread,"title",e)},expression:"formThread.title"}})],1),n("q-no-ssr",[n("p-editor",{model:{value:t.formThread.content,callback:function(e){t.$set(t.formThread,"content",e)},expression:"formThread.content"}})],1)],1)],1),n("q-card-actions",[n("q-btn",{staticClass:"bg-primary text-white",attrs:{type:"submit",label:"发布",flat:""}})],1)],1)],1)],1)},C=[],P=n("ee8c"),A=n("6def"),I=n("3ac3"),D=n("6aed"),F=n("f47b"),L=n("a7bb"),N=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),E=function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},R=function(t,e,n,r){function o(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,a){function i(t){try{l(r.next(t))}catch(e){a(e)}}function c(t){try{l(r["throw"](t))}catch(e){a(e)}}function l(t){t.done?n(t.value):o(t.value).then(i,c)}l((r=r.apply(t,e||[])).next())}))},M=function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(t){return function(e){return l([t,e])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,r&&(o=2&a[0]?r["return"]:a[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(c){a=[6,c],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},z=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.formThread=new P["a"],e.userStore=Object(u["d"])(f["a"],e.$store),e.formTags=[],e}return N(e,t),e.prototype.handleInput=function(t){this.$emit("input",t)},e.prototype.save=function(){return R(this,void 0,void 0,(function(){var t,e;return M(this,(function(n){switch(n.label){case 0:if(n.trys.push([0,2,,3]),this.formThread.uid=Number(this.userStore.user.userId),!(this.formThread.uid>0))throw"请登录后再发帖";return t=this,[4,I["a"].save(this.formThread)];case 1:return t.formThread=n.sent(),this.$q.notify("提交成功"),this.$emit("input",!1),[3,3];case 2:return e=n.sent(),this.$q.notify({message:"错误:"+e,color:"red"}),[3,3];case 3:return[2]}}))}))},e.prototype.getAll=function(){return R(this,void 0,void 0,(function(){var t;return M(this,(function(e){switch(e.label){case 0:return t=this,[4,D["a"].findAll(new F["a"])];case 1:return t.formTags=e.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"options",{get:function(){return this.formTags.map((function(t){return t.name}))},enumerable:!1,configurable:!0}),e.prototype.mounted=function(){this.getAll()},E([Object(a["b"])({default:function(){return!1}})],e.prototype,"value",void 0),e=E([Object(a["a"])({components:{FormTagChip:L["a"],PEditor:A["a"]}})],e),e}(a["c"]),B=z,G=B,U=n("24e8"),H=n("cb32"),J=n("068f"),K=n("ddd8"),V=n("d08c"),W=n("4b7e"),X=Object(w["a"])(G,$,C,!1,null,"6d26d7b7",null),Y=X.exports;S()(X,"components",{QDialog:U["a"],QCard:g["a"],QForm:O["a"],QCardSection:q["a"],QAvatar:H["a"],QImg:J["a"],QSelect:K["a"],QInput:x["a"],QNoSsr:V["a"],QCardActions:W["a"],QBtn:k["a"]});var Z=n("5fcc"),tt=n("9b9c"),et=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nt=function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},rt=function(t,e,n,r){function o(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,a){function i(t){try{l(r.next(t))}catch(e){a(e)}}function c(t){try{l(r["throw"](t))}catch(e){a(e)}}function l(t){t.done?n(t.value):o(t.value).then(i,c)}l((r=r.apply(t,e||[])).next())}))},ot=function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(t){return function(e){return l([t,e])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,r&&(o=2&a[0]?r["return"]:a[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(c){a=[6,c],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},at=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.leftDrawerOpen=!0,e.isLoginOpen=!1,e.isNewFormOpen=!1,e.userStore=Object(u["d"])(f["a"],e.$store),e.formTags=[],e}return et(e,t),e.prototype.getAll=function(){return rt(this,void 0,void 0,(function(){var t,e;return ot(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,D["a"].findAll(new F["a"])];case 1:return t.formTags=n.sent(),[3,3];case 2:return e=n.sent(),this.$q.notify({message:"错误:"+e,color:"red"}),[3,3];case 3:return[2]}}))}))},Object.defineProperty(e.prototype,"getAvatarSrc",{get:function(){return"/icons/favicon-128x128.png"},enumerable:!1,configurable:!0}),e.prototype.handleMoreTag=function(){tt["a"].of().isAdmin()&&this.$router.push({name:"Admin"})},e.prototype.mounted=function(){this.getAll()},e=nt([Object(a["a"])({components:{UserAvatar:Z["a"],NewFormDialog:Y,Login:Q}})],e),e}(a["c"]),it=at,ct=it,lt=n("4d5a"),st=n("e359"),ut=n("65c6"),ft=n("6ac5"),pt=n("9404"),dt=n("1c1c"),bt=n("0170"),ht=n("66e5"),mt=n("4074"),yt=n("05c0"),vt=n("09e3"),wt=Object(w["a"])(ct,r,o,!1,null,null,null);e["default"]=wt.exports;S()(wt,"components",{QLayout:lt["a"],QHeader:st["a"],QToolbar:ut["a"],QBtn:k["a"],QToolbarTitle:ft["a"],QDrawer:pt["a"],QList:dt["a"],QItemLabel:bt["a"],QItem:ht["a"],QItemSection:mt["a"],QAvatar:H["a"],QTooltip:yt["a"],QPageContainer:vt["a"],QDialog:U["a"]})},a1a0:function(t,e,n){"use strict";n("68a8")}}]);